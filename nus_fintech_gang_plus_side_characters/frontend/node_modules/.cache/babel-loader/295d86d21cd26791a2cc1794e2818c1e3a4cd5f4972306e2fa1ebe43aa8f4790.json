{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseTransactionFlags = exports.convertTxFlagsToNumber = exports.setTransactionFlagsToNumber = exports.parseAccountRootFlags = void 0;\nconst errors_1 = require(\"../../errors\");\nconst AccountRoot_1 = require(\"../ledger/AccountRoot\");\nconst accountSet_1 = require(\"../transactions/accountSet\");\nconst AMMClawback_1 = require(\"../transactions/AMMClawback\");\nconst AMMDeposit_1 = require(\"../transactions/AMMDeposit\");\nconst AMMWithdraw_1 = require(\"../transactions/AMMWithdraw\");\nconst batch_1 = require(\"../transactions/batch\");\nconst common_1 = require(\"../transactions/common\");\nconst loanManage_1 = require(\"../transactions/loanManage\");\nconst MPTokenAuthorize_1 = require(\"../transactions/MPTokenAuthorize\");\nconst MPTokenIssuanceCreate_1 = require(\"../transactions/MPTokenIssuanceCreate\");\nconst MPTokenIssuanceSet_1 = require(\"../transactions/MPTokenIssuanceSet\");\nconst NFTokenCreateOffer_1 = require(\"../transactions/NFTokenCreateOffer\");\nconst NFTokenMint_1 = require(\"../transactions/NFTokenMint\");\nconst offerCreate_1 = require(\"../transactions/offerCreate\");\nconst payment_1 = require(\"../transactions/payment\");\nconst paymentChannelClaim_1 = require(\"../transactions/paymentChannelClaim\");\nconst trustSet_1 = require(\"../transactions/trustSet\");\nconst vaultCreate_1 = require(\"../transactions/vaultCreate\");\nconst XChainModifyBridge_1 = require(\"../transactions/XChainModifyBridge\");\nconst _1 = require(\".\");\nfunction parseAccountRootFlags(flags) {\n  const flagsInterface = {};\n  Object.values(AccountRoot_1.AccountRootFlags).forEach(flag => {\n    if (typeof flag === 'string' && (0, _1.isFlagEnabled)(flags, AccountRoot_1.AccountRootFlags[flag])) {\n      flagsInterface[flag] = true;\n    }\n  });\n  return flagsInterface;\n}\nexports.parseAccountRootFlags = parseAccountRootFlags;\nconst txToFlag = {\n  AccountSet: accountSet_1.AccountSetTfFlags,\n  AMMClawback: AMMClawback_1.AMMClawbackFlags,\n  AMMDeposit: AMMDeposit_1.AMMDepositFlags,\n  AMMWithdraw: AMMWithdraw_1.AMMWithdrawFlags,\n  Batch: batch_1.BatchFlags,\n  LoanManage: loanManage_1.LoanManageFlags,\n  MPTokenAuthorize: MPTokenAuthorize_1.MPTokenAuthorizeFlags,\n  MPTokenIssuanceCreate: MPTokenIssuanceCreate_1.MPTokenIssuanceCreateFlags,\n  MPTokenIssuanceSet: MPTokenIssuanceSet_1.MPTokenIssuanceSetFlags,\n  NFTokenCreateOffer: NFTokenCreateOffer_1.NFTokenCreateOfferFlags,\n  NFTokenMint: NFTokenMint_1.NFTokenMintFlags,\n  OfferCreate: offerCreate_1.OfferCreateFlags,\n  PaymentChannelClaim: paymentChannelClaim_1.PaymentChannelClaimFlags,\n  Payment: payment_1.PaymentFlags,\n  TrustSet: trustSet_1.TrustSetFlags,\n  VaultCreate: vaultCreate_1.VaultCreateFlags,\n  XChainModifyBridge: XChainModifyBridge_1.XChainModifyBridgeFlags\n};\nfunction isTxToFlagKey(transactionType) {\n  return transactionType in txToFlag;\n}\nfunction setTransactionFlagsToNumber(tx) {\n  console.warn('This function is deprecated. Use convertTxFlagsToNumber() instead and use the returned value to modify the Transaction.Flags from the caller.');\n  if (tx.Flags) {\n    tx.Flags = convertTxFlagsToNumber(tx);\n  }\n}\nexports.setTransactionFlagsToNumber = setTransactionFlagsToNumber;\nfunction convertTxFlagsToNumber(tx) {\n  const txFlags = tx.Flags;\n  if (txFlags == null) {\n    return 0;\n  }\n  if (typeof txFlags === 'number') {\n    return txFlags;\n  }\n  if (isTxToFlagKey(tx.TransactionType)) {\n    const flagEnum = txToFlag[tx.TransactionType];\n    return Object.keys(txFlags).reduce((resultFlags, flag) => {\n      var _a;\n      if (flagEnum[flag] == null && common_1.GlobalFlags[flag] == null) {\n        throw new errors_1.ValidationError(`Invalid flag ${flag}.`);\n      }\n      return txFlags[flag] ? resultFlags | ((_a = flagEnum[flag]) !== null && _a !== void 0 ? _a : common_1.GlobalFlags[flag]) : resultFlags;\n    }, 0);\n  }\n  return Object.keys(txFlags).reduce((resultFlags, flag) => {\n    if (common_1.GlobalFlags[flag] == null) {\n      throw new errors_1.ValidationError(`Invalid flag ${flag}. Valid flags are ${JSON.stringify(common_1.GlobalFlags)}`);\n    }\n    return txFlags[flag] ? resultFlags | common_1.GlobalFlags[flag] : resultFlags;\n  }, 0);\n}\nexports.convertTxFlagsToNumber = convertTxFlagsToNumber;\nfunction parseTransactionFlags(tx) {\n  const flags = convertTxFlagsToNumber(tx);\n  if (flags === 0) {\n    return {};\n  }\n  const booleanFlagMap = {};\n  if (isTxToFlagKey(tx.TransactionType)) {\n    const transactionTypeFlags = txToFlag[tx.TransactionType];\n    Object.values(transactionTypeFlags).forEach(flag => {\n      if (typeof flag === 'string' && (0, _1.isFlagEnabled)(flags, transactionTypeFlags[flag])) {\n        booleanFlagMap[flag] = true;\n      }\n    });\n  }\n  Object.values(common_1.GlobalFlags).forEach(flag => {\n    if (typeof flag === 'string' && (0, _1.isFlagEnabled)(flags, common_1.GlobalFlags[flag])) {\n      booleanFlagMap[flag] = true;\n    }\n  });\n  return booleanFlagMap;\n}\nexports.parseTransactionFlags = parseTransactionFlags;","map":{"version":3,"names":["errors_1","require","AccountRoot_1","accountSet_1","AMMClawback_1","AMMDeposit_1","AMMWithdraw_1","batch_1","common_1","loanManage_1","MPTokenAuthorize_1","MPTokenIssuanceCreate_1","MPTokenIssuanceSet_1","NFTokenCreateOffer_1","NFTokenMint_1","offerCreate_1","payment_1","paymentChannelClaim_1","trustSet_1","vaultCreate_1","XChainModifyBridge_1","_1","parseAccountRootFlags","flags","flagsInterface","Object","values","AccountRootFlags","forEach","flag","isFlagEnabled","exports","txToFlag","AccountSet","AccountSetTfFlags","AMMClawback","AMMClawbackFlags","AMMDeposit","AMMDepositFlags","AMMWithdraw","AMMWithdrawFlags","Batch","BatchFlags","LoanManage","LoanManageFlags","MPTokenAuthorize","MPTokenAuthorizeFlags","MPTokenIssuanceCreate","MPTokenIssuanceCreateFlags","MPTokenIssuanceSet","MPTokenIssuanceSetFlags","NFTokenCreateOffer","NFTokenCreateOfferFlags","NFTokenMint","NFTokenMintFlags","OfferCreate","OfferCreateFlags","PaymentChannelClaim","PaymentChannelClaimFlags","Payment","PaymentFlags","TrustSet","TrustSetFlags","VaultCreate","VaultCreateFlags","XChainModifyBridge","XChainModifyBridgeFlags","isTxToFlagKey","transactionType","setTransactionFlagsToNumber","tx","console","warn","Flags","convertTxFlagsToNumber","txFlags","TransactionType","flagEnum","keys","reduce","resultFlags","GlobalFlags","ValidationError","_a","JSON","stringify","parseTransactionFlags","booleanFlagMap","transactionTypeFlags"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/utils/flags.ts"],"sourcesContent":["/* eslint-disable no-bitwise -- flags require bitwise operations */\nimport { ValidationError } from '../../errors'\nimport {\n  AccountRootFlagsInterface,\n  AccountRootFlags,\n} from '../ledger/AccountRoot'\nimport { AccountSetTfFlags } from '../transactions/accountSet'\nimport { AMMClawbackFlags } from '../transactions/AMMClawback'\nimport { AMMDepositFlags } from '../transactions/AMMDeposit'\nimport { AMMWithdrawFlags } from '../transactions/AMMWithdraw'\nimport { BatchFlags } from '../transactions/batch'\nimport { GlobalFlags } from '../transactions/common'\nimport { LoanManageFlags } from '../transactions/loanManage'\nimport { MPTokenAuthorizeFlags } from '../transactions/MPTokenAuthorize'\nimport { MPTokenIssuanceCreateFlags } from '../transactions/MPTokenIssuanceCreate'\nimport { MPTokenIssuanceSetFlags } from '../transactions/MPTokenIssuanceSet'\nimport { NFTokenCreateOfferFlags } from '../transactions/NFTokenCreateOffer'\nimport { NFTokenMintFlags } from '../transactions/NFTokenMint'\nimport { OfferCreateFlags } from '../transactions/offerCreate'\nimport { PaymentFlags } from '../transactions/payment'\nimport { PaymentChannelClaimFlags } from '../transactions/paymentChannelClaim'\nimport type { Transaction } from '../transactions/transaction'\nimport { TrustSetFlags } from '../transactions/trustSet'\nimport { VaultCreateFlags } from '../transactions/vaultCreate'\nimport { XChainModifyBridgeFlags } from '../transactions/XChainModifyBridge'\n\nimport { isFlagEnabled } from '.'\n\n/**\n * Convert an AccountRoot Flags number into an interface for easy interpretation.\n *\n * @param flags - A number which is the bitwise and of all enabled AccountRootFlagsInterface.\n * @returns An interface with all flags as booleans.\n */\nexport function parseAccountRootFlags(\n  flags: number,\n): AccountRootFlagsInterface {\n  const flagsInterface: AccountRootFlagsInterface = {}\n\n  // If we use keys all will be strings and enums are reversed during transpilation\n  Object.values(AccountRootFlags).forEach((flag) => {\n    if (\n      typeof flag === 'string' &&\n      isFlagEnabled(flags, AccountRootFlags[flag])\n    ) {\n      flagsInterface[flag] = true\n    }\n  })\n\n  return flagsInterface\n}\n\nconst txToFlag = {\n  AccountSet: AccountSetTfFlags,\n  AMMClawback: AMMClawbackFlags,\n  AMMDeposit: AMMDepositFlags,\n  AMMWithdraw: AMMWithdrawFlags,\n  Batch: BatchFlags,\n  LoanManage: LoanManageFlags,\n  MPTokenAuthorize: MPTokenAuthorizeFlags,\n  MPTokenIssuanceCreate: MPTokenIssuanceCreateFlags,\n  MPTokenIssuanceSet: MPTokenIssuanceSetFlags,\n  NFTokenCreateOffer: NFTokenCreateOfferFlags,\n  NFTokenMint: NFTokenMintFlags,\n  OfferCreate: OfferCreateFlags,\n  PaymentChannelClaim: PaymentChannelClaimFlags,\n  Payment: PaymentFlags,\n  TrustSet: TrustSetFlags,\n  VaultCreate: VaultCreateFlags,\n  XChainModifyBridge: XChainModifyBridgeFlags,\n}\n\nfunction isTxToFlagKey(\n  transactionType: string,\n): transactionType is keyof typeof txToFlag {\n  return transactionType in txToFlag\n}\n\n/**\n * Sets a transaction's flags to its numeric representation.\n *\n * @deprecated\n * This utility function is deprecated.\n * Use convertTxFlagsToNumber() instead and use the returned value to modify the Transaction.Flags from the caller.\n *\n * @param tx - A transaction to set its flags to its numeric representation.\n */\nexport function setTransactionFlagsToNumber(tx: Transaction): void {\n  // eslint-disable-next-line no-console -- intended deprecation warning\n  console.warn(\n    'This function is deprecated. Use convertTxFlagsToNumber() instead and use the returned value to modify the Transaction.Flags from the caller.',\n  )\n\n  if (tx.Flags) {\n    // eslint-disable-next-line no-param-reassign -- intended param reassign in setter, retain old functionality for compatibility\n    tx.Flags = convertTxFlagsToNumber(tx)\n  }\n}\n\n/**\n * Returns a Transaction's Flags as its numeric representation.\n *\n * @param tx - A Transaction to parse Flags for\n * @returns A numerical representation of a Transaction's Flags\n */\nexport function convertTxFlagsToNumber(tx: Transaction): number {\n  const txFlags = tx.Flags\n  if (txFlags == null) {\n    return 0\n  }\n  if (typeof txFlags === 'number') {\n    return txFlags\n  }\n\n  if (isTxToFlagKey(tx.TransactionType)) {\n    const flagEnum = txToFlag[tx.TransactionType]\n    return Object.keys(txFlags).reduce((resultFlags, flag) => {\n      if (flagEnum[flag] == null && GlobalFlags[flag] == null) {\n        throw new ValidationError(`Invalid flag ${flag}.`)\n      }\n\n      return txFlags[flag]\n        ? resultFlags | (flagEnum[flag] ?? GlobalFlags[flag])\n        : resultFlags\n    }, 0)\n  }\n\n  return Object.keys(txFlags).reduce((resultFlags, flag) => {\n    if (GlobalFlags[flag] == null) {\n      throw new ValidationError(\n        `Invalid flag ${flag}. Valid flags are ${JSON.stringify(GlobalFlags)}`,\n      )\n    }\n\n    return txFlags[flag] ? resultFlags | GlobalFlags[flag] : resultFlags\n  }, 0)\n}\n\n/**\n * Convert a Transaction flags property into a map for easy interpretation.\n *\n * @param tx - A transaction to parse flags for.\n * @returns A map with all flags as booleans.\n */\nexport function parseTransactionFlags(tx: Transaction): object {\n  const flags = convertTxFlagsToNumber(tx)\n  if (flags === 0) {\n    return {}\n  }\n\n  const booleanFlagMap = {}\n\n  if (isTxToFlagKey(tx.TransactionType)) {\n    const transactionTypeFlags = txToFlag[tx.TransactionType]\n    Object.values(transactionTypeFlags).forEach((flag) => {\n      if (\n        typeof flag === 'string' &&\n        isFlagEnabled(flags, transactionTypeFlags[flag])\n      ) {\n        booleanFlagMap[flag] = true\n      }\n    })\n  }\n\n  Object.values(GlobalFlags).forEach((flag) => {\n    if (typeof flag === 'string' && isFlagEnabled(flags, GlobalFlags[flag])) {\n      booleanFlagMap[flag] = true\n    }\n  })\n\n  return booleanFlagMap\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}