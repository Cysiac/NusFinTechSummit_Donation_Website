{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateOracleSet = void 0;\nconst errors_1 = require(\"../../errors\");\nconst utils_1 = require(\"../utils\");\nconst common_1 = require(\"./common\");\nconst PRICE_DATA_SERIES_MAX_LENGTH = 10;\nconst SCALE_MAX = 10;\nconst MINIMUM_ASSET_PRICE_LENGTH = 1;\nconst MAXIMUM_ASSET_PRICE_LENGTH = 16;\nfunction validateOracleSet(tx) {\n  (0, common_1.validateBaseTransaction)(tx);\n  (0, common_1.validateRequiredField)(tx, 'OracleDocumentID', common_1.isNumber);\n  (0, common_1.validateRequiredField)(tx, 'LastUpdateTime', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'Provider', common_1.isString);\n  (0, common_1.validateOptionalField)(tx, 'URI', common_1.isString);\n  (0, common_1.validateOptionalField)(tx, 'AssetClass', common_1.isString);\n  (0, common_1.validateRequiredField)(tx, 'PriceDataSeries', value => {\n    if (!(0, common_1.isArray)(value)) {\n      throw new errors_1.ValidationError('OracleSet: PriceDataSeries must be an array');\n    }\n    if (value.length > PRICE_DATA_SERIES_MAX_LENGTH) {\n      throw new errors_1.ValidationError(`OracleSet: PriceDataSeries must have at most ${PRICE_DATA_SERIES_MAX_LENGTH} PriceData objects`);\n    }\n    for (const priceData of value) {\n      if (!(0, common_1.isRecord)(priceData)) {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must be an array of objects');\n      }\n      const priceDataInner = priceData.PriceData;\n      if (!(0, common_1.isRecord)(priceDataInner)) {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must have a `PriceData` object');\n      }\n      if (Object.keys(priceData).length !== 1) {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must only have a single PriceData object');\n      }\n      if (priceDataInner.BaseAsset == null || typeof priceDataInner.BaseAsset !== 'string') {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must have a `BaseAsset` string');\n      }\n      if (typeof priceDataInner.QuoteAsset !== 'string') {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must have a `QuoteAsset` string');\n      }\n      if (priceDataInner.AssetPrice == null !== (priceDataInner.Scale == null)) {\n        throw new errors_1.ValidationError('OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present');\n      }\n      if ('AssetPrice' in priceDataInner) {\n        if (!(0, common_1.isNumber)(priceDataInner.AssetPrice)) {\n          if (typeof priceDataInner.AssetPrice !== 'string') {\n            throw new errors_1.ValidationError('OracleSet: Field AssetPrice must be a string or a number');\n          }\n          if (!(0, utils_1.isHex)(priceDataInner.AssetPrice)) {\n            throw new errors_1.ValidationError('OracleSet: Field AssetPrice must be a valid hex string');\n          }\n          if (priceDataInner.AssetPrice.length < MINIMUM_ASSET_PRICE_LENGTH || priceDataInner.AssetPrice.length > MAXIMUM_ASSET_PRICE_LENGTH) {\n            throw new errors_1.ValidationError(`OracleSet: Length of AssetPrice field must be between ${MINIMUM_ASSET_PRICE_LENGTH} and ${MAXIMUM_ASSET_PRICE_LENGTH} characters long`);\n          }\n        }\n      }\n      if ('Scale' in priceDataInner) {\n        if (!(0, common_1.isNumber)(priceDataInner.Scale)) {\n          throw new errors_1.ValidationError('OracleSet: invalid field Scale');\n        }\n        if (priceDataInner.Scale < 0 || priceDataInner.Scale > SCALE_MAX) {\n          throw new errors_1.ValidationError(`OracleSet: Scale must be in range 0-${SCALE_MAX}`);\n        }\n      }\n    }\n    return true;\n  });\n}\nexports.validateOracleSet = validateOracleSet;","map":{"version":3,"names":["errors_1","require","utils_1","common_1","PRICE_DATA_SERIES_MAX_LENGTH","SCALE_MAX","MINIMUM_ASSET_PRICE_LENGTH","MAXIMUM_ASSET_PRICE_LENGTH","validateOracleSet","tx","validateBaseTransaction","validateRequiredField","isNumber","validateOptionalField","isString","value","isArray","ValidationError","length","priceData","isRecord","priceDataInner","PriceData","Object","keys","BaseAsset","QuoteAsset","AssetPrice","Scale","isHex","exports"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/transactions/oracleSet.ts"],"sourcesContent":["import { ValidationError } from '../../errors'\nimport { PriceData } from '../common'\nimport { isHex } from '../utils'\n\nimport {\n  BaseTransaction,\n  isArray,\n  isNumber,\n  isRecord,\n  isString,\n  validateBaseTransaction,\n  validateOptionalField,\n  validateRequiredField,\n} from './common'\n\nconst PRICE_DATA_SERIES_MAX_LENGTH = 10\nconst SCALE_MAX = 10\nconst MINIMUM_ASSET_PRICE_LENGTH = 1\nconst MAXIMUM_ASSET_PRICE_LENGTH = 16\n\n/**\n * Creates a new Oracle ledger entry or updates the fields of an existing one, using the Oracle ID.\n *\n * The oracle provider must complete these steps before submitting this transaction:\n * 1. Create or own the XRPL account in the Owner field and have enough XRP to meet the reserve and transaction fee requirements.\n * 2. Publish the XRPL account public key, so it can be used for verification by dApps.\n * 3. Publish a registry of available price oracles with their unique OracleDocumentID.\n *\n * @category Transaction Models\n */\nexport interface OracleSet extends BaseTransaction {\n  TransactionType: 'OracleSet'\n\n  /**\n   * A unique identifier of the price oracle for the Account.\n   */\n  OracleDocumentID: number\n\n  /**\n   * The time the data was last updated, represented as a unix timestamp in seconds.\n   */\n  LastUpdateTime: number\n\n  /**\n   * An array of up to 10 PriceData objects, each representing the price information\n   * for a token pair. More than five PriceData objects require two owner reserves.\n   */\n  PriceDataSeries: PriceData[]\n\n  /**\n   * An arbitrary value that identifies an oracle provider, such as Chainlink, Band,\n   * or DIA. This field is a string, up to 256 ASCII hex encoded characters (0x20-0x7E).\n   * This field is required when creating a new Oracle ledger entry, but is optional for updates.\n   */\n  Provider?: string\n\n  /**\n   * An optional Universal Resource Identifier to reference price data off-chain. This field is limited to 256 bytes.\n   */\n  URI?: string\n\n  /**\n   * Describes the type of asset, such as \"currency\", \"commodity\", or \"index\". This field is a string, up to 16 ASCII\n   * hex encoded characters (0x20-0x7E). This field is required when creating a new Oracle ledger entry, but is optional\n   * for updates.\n   */\n  AssetClass?: string\n}\n\n/**\n * Verify the form and type of a OracleSet at runtime.\n *\n * @param tx - A OracleSet Transaction.\n * @throws When the OracleSet is malformed.\n */\n// eslint-disable-next-line max-lines-per-function -- necessary to validate many fields\nexport function validateOracleSet(tx: Record<string, unknown>): void {\n  validateBaseTransaction(tx)\n\n  validateRequiredField(tx, 'OracleDocumentID', isNumber)\n\n  validateRequiredField(tx, 'LastUpdateTime', isNumber)\n\n  validateOptionalField(tx, 'Provider', isString)\n\n  validateOptionalField(tx, 'URI', isString)\n\n  validateOptionalField(tx, 'AssetClass', isString)\n\n  /* eslint-disable max-statements, max-lines-per-function -- necessary to validate many fields */\n  validateRequiredField(\n    tx,\n    'PriceDataSeries',\n    (value: unknown): value is PriceData => {\n      if (!isArray(value)) {\n        throw new ValidationError('OracleSet: PriceDataSeries must be an array')\n      }\n\n      if (value.length > PRICE_DATA_SERIES_MAX_LENGTH) {\n        throw new ValidationError(\n          `OracleSet: PriceDataSeries must have at most ${PRICE_DATA_SERIES_MAX_LENGTH} PriceData objects`,\n        )\n      }\n\n      // TODO: add support for handling inner objects easier (similar to validateRequiredField/validateOptionalField)\n      for (const priceData of value) {\n        if (!isRecord(priceData)) {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must be an array of objects',\n          )\n        }\n\n        const priceDataInner = priceData.PriceData\n\n        if (!isRecord(priceDataInner)) {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must have a `PriceData` object',\n          )\n        }\n\n        // check if priceData only has PriceData\n        if (Object.keys(priceData).length !== 1) {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must only have a single PriceData object',\n          )\n        }\n\n        if (\n          priceDataInner.BaseAsset == null ||\n          typeof priceDataInner.BaseAsset !== 'string'\n        ) {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must have a `BaseAsset` string',\n          )\n        }\n\n        if (typeof priceDataInner.QuoteAsset !== 'string') {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must have a `QuoteAsset` string',\n          )\n        }\n\n        // Either AssetPrice and Scale are both present or both excluded\n        if (\n          (priceDataInner.AssetPrice == null) !==\n          (priceDataInner.Scale == null)\n        ) {\n          throw new ValidationError(\n            'OracleSet: PriceDataSeries must have both `AssetPrice` and `Scale` if any are present',\n          )\n        }\n\n        /* eslint-disable max-depth --\n      we need to validate priceDataInner.AssetPrice value */\n        if ('AssetPrice' in priceDataInner) {\n          if (!isNumber(priceDataInner.AssetPrice)) {\n            if (typeof priceDataInner.AssetPrice !== 'string') {\n              throw new ValidationError(\n                'OracleSet: Field AssetPrice must be a string or a number',\n              )\n            }\n            if (!isHex(priceDataInner.AssetPrice)) {\n              throw new ValidationError(\n                'OracleSet: Field AssetPrice must be a valid hex string',\n              )\n            }\n            if (\n              priceDataInner.AssetPrice.length < MINIMUM_ASSET_PRICE_LENGTH ||\n              priceDataInner.AssetPrice.length > MAXIMUM_ASSET_PRICE_LENGTH\n            ) {\n              throw new ValidationError(\n                `OracleSet: Length of AssetPrice field must be between ${MINIMUM_ASSET_PRICE_LENGTH} and ${MAXIMUM_ASSET_PRICE_LENGTH} characters long`,\n              )\n            }\n          }\n        }\n\n        if ('Scale' in priceDataInner) {\n          if (!isNumber(priceDataInner.Scale)) {\n            throw new ValidationError('OracleSet: invalid field Scale')\n          }\n\n          if (priceDataInner.Scale < 0 || priceDataInner.Scale > SCALE_MAX) {\n            throw new ValidationError(\n              `OracleSet: Scale must be in range 0-${SCALE_MAX}`,\n            )\n          }\n          /* eslint-enable max-depth */\n        }\n      }\n      return true\n    },\n  )\n  /* eslint-enable max-statements, max-lines-per-function */\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}