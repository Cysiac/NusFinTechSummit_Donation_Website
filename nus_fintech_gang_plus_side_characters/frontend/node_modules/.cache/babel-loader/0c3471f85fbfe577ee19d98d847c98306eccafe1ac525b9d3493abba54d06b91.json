{"ast":null,"code":"\"use client\";\n\nvar _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { useWallet } from \"../components/providers/WalletProvider\";\nexport function useWalletConnector(walletManager) {\n  _s();\n  const walletConnectorRef = useRef(null);\n  const {\n    addEvent,\n    showStatus\n  } = useWallet();\n  useEffect(() => {\n    if (!walletConnectorRef.current || !walletManager) return;\n    const setupConnector = async () => {\n      // Wait for custom element to be defined and upgraded\n      await customElements.whenDefined(\"xrpl-wallet-connector\");\n\n      // Small delay to ensure the element is fully initialized\n      await new Promise(resolve => setTimeout(resolve, 0));\n      if (walletConnectorRef.current && typeof walletConnectorRef.current.setWalletManager === \"function\") {\n        walletConnectorRef.current.setWalletManager(walletManager);\n\n        // Listen to connector events\n        const handleConnecting = e => {\n          showStatus(`Connecting to ${e.detail.walletId}...`, \"info\");\n        };\n        const handleConnected = e => {\n          showStatus(\"Connected successfully!\", \"success\");\n          addEvent(\"Connected via Web Component\", e.detail);\n        };\n        const handleError = e => {\n          showStatus(`Connection failed: ${e.detail.error.message}`, \"error\");\n          addEvent(\"Connection Error\", e.detail);\n        };\n        walletConnectorRef.current.addEventListener(\"connecting\", handleConnecting);\n        walletConnectorRef.current.addEventListener(\"connected\", handleConnected);\n        walletConnectorRef.current.addEventListener(\"error\", handleError);\n        return () => {\n          if (walletConnectorRef.current) {\n            walletConnectorRef.current.removeEventListener(\"connecting\", handleConnecting);\n            walletConnectorRef.current.removeEventListener(\"connected\", handleConnected);\n            walletConnectorRef.current.removeEventListener(\"error\", handleError);\n          }\n        };\n      }\n    };\n    setupConnector();\n  }, [walletManager, addEvent, showStatus]);\n  return walletConnectorRef;\n}\n_s(useWalletConnector, \"/4MFRz2kZq8It/ifrqkjP6iJorw=\", false, function () {\n  return [useWallet];\n});","map":{"version":3,"names":["_s","$RefreshSig$","useEffect","useRef","useWallet","useWalletConnector","walletManager","walletConnectorRef","addEvent","showStatus","current","setupConnector","customElements","whenDefined","Promise","resolve","setTimeout","setWalletManager","handleConnecting","e","detail","walletId","handleConnected","handleError","error","message","addEventListener","removeEventListener"],"sources":["/workspaces/nus_fintech_gang_plus_side_characters/frontend/src/hooks/useWalletConnector.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { useWallet } from \"../components/providers/WalletProvider\";\n\nexport function useWalletConnector(walletManager) {\n  const walletConnectorRef = useRef(null);\n  const { addEvent, showStatus } = useWallet();\n\n  useEffect(() => {\n    if (!walletConnectorRef.current || !walletManager) return;\n\n    const setupConnector = async () => {\n      // Wait for custom element to be defined and upgraded\n      await customElements.whenDefined(\"xrpl-wallet-connector\");\n\n      // Small delay to ensure the element is fully initialized\n      await new Promise((resolve) => setTimeout(resolve, 0));\n\n      if (\n        walletConnectorRef.current &&\n        typeof walletConnectorRef.current.setWalletManager === \"function\"\n      ) {\n        walletConnectorRef.current.setWalletManager(walletManager);\n\n        // Listen to connector events\n        const handleConnecting = (e) => {\n          showStatus(`Connecting to ${e.detail.walletId}...`, \"info\");\n        };\n\n        const handleConnected = (e) => {\n          showStatus(\"Connected successfully!\", \"success\");\n          addEvent(\"Connected via Web Component\", e.detail);\n        };\n\n        const handleError = (e) => {\n          showStatus(`Connection failed: ${e.detail.error.message}`, \"error\");\n          addEvent(\"Connection Error\", e.detail);\n        };\n\n        walletConnectorRef.current.addEventListener(\"connecting\", handleConnecting);\n        walletConnectorRef.current.addEventListener(\"connected\", handleConnected);\n        walletConnectorRef.current.addEventListener(\"error\", handleError);\n\n        return () => {\n          if (walletConnectorRef.current) {\n            walletConnectorRef.current.removeEventListener(\"connecting\", handleConnecting);\n            walletConnectorRef.current.removeEventListener(\"connected\", handleConnected);\n            walletConnectorRef.current.removeEventListener(\"error\", handleError);\n          }\n        };\n      }\n    };\n\n    setupConnector();\n  }, [walletManager, addEvent, showStatus]);\n\n  return walletConnectorRef;\n}\n"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,EAAA,GAAAC,YAAA;AAEb,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,SAAS,QAAQ,wCAAwC;AAElE,OAAO,SAASC,kBAAkBA,CAACC,aAAa,EAAE;EAAAN,EAAA;EAChD,MAAMO,kBAAkB,GAAGJ,MAAM,CAAC,IAAI,CAAC;EACvC,MAAM;IAAEK,QAAQ;IAAEC;EAAW,CAAC,GAAGL,SAAS,CAAC,CAAC;EAE5CF,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,kBAAkB,CAACG,OAAO,IAAI,CAACJ,aAAa,EAAE;IAEnD,MAAMK,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC;MACA,MAAMC,cAAc,CAACC,WAAW,CAAC,uBAAuB,CAAC;;MAEzD;MACA,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC,CAAC;MAEtD,IACER,kBAAkB,CAACG,OAAO,IAC1B,OAAOH,kBAAkB,CAACG,OAAO,CAACO,gBAAgB,KAAK,UAAU,EACjE;QACAV,kBAAkB,CAACG,OAAO,CAACO,gBAAgB,CAACX,aAAa,CAAC;;QAE1D;QACA,MAAMY,gBAAgB,GAAIC,CAAC,IAAK;UAC9BV,UAAU,CAAC,iBAAiBU,CAAC,CAACC,MAAM,CAACC,QAAQ,KAAK,EAAE,MAAM,CAAC;QAC7D,CAAC;QAED,MAAMC,eAAe,GAAIH,CAAC,IAAK;UAC7BV,UAAU,CAAC,yBAAyB,EAAE,SAAS,CAAC;UAChDD,QAAQ,CAAC,6BAA6B,EAAEW,CAAC,CAACC,MAAM,CAAC;QACnD,CAAC;QAED,MAAMG,WAAW,GAAIJ,CAAC,IAAK;UACzBV,UAAU,CAAC,sBAAsBU,CAAC,CAACC,MAAM,CAACI,KAAK,CAACC,OAAO,EAAE,EAAE,OAAO,CAAC;UACnEjB,QAAQ,CAAC,kBAAkB,EAAEW,CAAC,CAACC,MAAM,CAAC;QACxC,CAAC;QAEDb,kBAAkB,CAACG,OAAO,CAACgB,gBAAgB,CAAC,YAAY,EAAER,gBAAgB,CAAC;QAC3EX,kBAAkB,CAACG,OAAO,CAACgB,gBAAgB,CAAC,WAAW,EAAEJ,eAAe,CAAC;QACzEf,kBAAkB,CAACG,OAAO,CAACgB,gBAAgB,CAAC,OAAO,EAAEH,WAAW,CAAC;QAEjE,OAAO,MAAM;UACX,IAAIhB,kBAAkB,CAACG,OAAO,EAAE;YAC9BH,kBAAkB,CAACG,OAAO,CAACiB,mBAAmB,CAAC,YAAY,EAAET,gBAAgB,CAAC;YAC9EX,kBAAkB,CAACG,OAAO,CAACiB,mBAAmB,CAAC,WAAW,EAAEL,eAAe,CAAC;YAC5Ef,kBAAkB,CAACG,OAAO,CAACiB,mBAAmB,CAAC,OAAO,EAAEJ,WAAW,CAAC;UACtE;QACF,CAAC;MACH;IACF,CAAC;IAEDZ,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACL,aAAa,EAAEE,QAAQ,EAAEC,UAAU,CAAC,CAAC;EAEzC,OAAOF,kBAAkB;AAC3B;AAACP,EAAA,CArDeK,kBAAkB;EAAA,QAECD,SAAS;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}