{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateBatch = exports.BatchFlags = void 0;\nconst errors_1 = require(\"../../errors\");\nconst utils_1 = require(\"../utils\");\nconst common_1 = require(\"./common\");\nvar BatchFlags;\n(function (BatchFlags) {\n  BatchFlags[BatchFlags[\"tfAllOrNothing\"] = 65536] = \"tfAllOrNothing\";\n  BatchFlags[BatchFlags[\"tfOnlyOne\"] = 131072] = \"tfOnlyOne\";\n  BatchFlags[BatchFlags[\"tfUntilFailure\"] = 262144] = \"tfUntilFailure\";\n  BatchFlags[BatchFlags[\"tfIndependent\"] = 524288] = \"tfIndependent\";\n})(BatchFlags || (exports.BatchFlags = BatchFlags = {}));\nfunction validateBatchInnerTransaction(tx, index) {\n  if (tx.TransactionType === 'Batch') {\n    throw new errors_1.ValidationError(`Batch: RawTransactions[${index}] is a Batch transaction. Cannot nest Batch transactions.`);\n  }\n  if (!(0, utils_1.hasFlag)(tx, common_1.GlobalFlags.tfInnerBatchTxn, 'tfInnerBatchTxn')) {\n    throw new errors_1.ValidationError(`Batch: RawTransactions[${index}] must contain the \\`tfInnerBatchTxn\\` flag.`);\n  }\n  (0, common_1.validateOptionalField)(tx, 'Fee', (0, common_1.isValue)('0'), {\n    paramName: `RawTransactions[${index}].RawTransaction.Fee`,\n    txType: 'Batch'\n  });\n  (0, common_1.validateOptionalField)(tx, 'SigningPubKey', (0, common_1.isValue)(''), {\n    paramName: `RawTransactions[${index}].RawTransaction.SigningPubKey`,\n    txType: 'Batch'\n  });\n  (0, common_1.validateOptionalField)(tx, 'TxnSignature', common_1.isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.TxnSignature`,\n    txType: 'Batch'\n  });\n  (0, common_1.validateOptionalField)(tx, 'Signers', common_1.isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.Signers`,\n    txType: 'Batch'\n  });\n  (0, common_1.validateOptionalField)(tx, 'LastLedgerSequence', common_1.isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.LastLedgerSequence`,\n    txType: 'Batch'\n  });\n}\nfunction validateBatch(tx) {\n  var _a;\n  (0, common_1.validateBaseTransaction)(tx);\n  (0, common_1.validateRequiredField)(tx, 'RawTransactions', common_1.isArray);\n  tx.RawTransactions.forEach((rawTxObj, index) => {\n    if (!(0, common_1.isRecord)(rawTxObj)) {\n      throw new errors_1.ValidationError(`Batch: RawTransactions[${index}] is not object.`);\n    }\n    (0, common_1.validateRequiredField)(rawTxObj, 'RawTransaction', common_1.isRecord, {\n      paramName: `RawTransactions[${index}].RawTransaction`,\n      txType: 'Batch'\n    });\n    const rawTx = rawTxObj.RawTransaction;\n    validateBatchInnerTransaction(rawTx, index);\n  });\n  (0, common_1.validateOptionalField)(tx, 'BatchSigners', common_1.isArray);\n  (_a = tx.BatchSigners) === null || _a === void 0 ? void 0 : _a.forEach((signerObj, index) => {\n    if (!(0, common_1.isRecord)(signerObj)) {\n      throw new errors_1.ValidationError(`Batch: BatchSigners[${index}] is not object.`);\n    }\n    const signerRecord = signerObj;\n    (0, common_1.validateRequiredField)(signerRecord, 'BatchSigner', common_1.isRecord, {\n      paramName: `BatchSigners[${index}].BatchSigner`,\n      txType: 'Batch'\n    });\n    const signer = signerRecord.BatchSigner;\n    (0, common_1.validateRequiredField)(signer, 'Account', common_1.isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.Account`,\n      txType: 'Batch'\n    });\n    (0, common_1.validateOptionalField)(signer, 'SigningPubKey', common_1.isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.SigningPubKey`,\n      txType: 'Batch'\n    });\n    (0, common_1.validateOptionalField)(signer, 'TxnSignature', common_1.isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.TxnSignature`,\n      txType: 'Batch'\n    });\n    (0, common_1.validateOptionalField)(signer, 'Signers', common_1.isArray, {\n      paramName: `BatchSigners[${index}].BatchSigner.Signers`,\n      txType: 'Batch'\n    });\n  });\n}\nexports.validateBatch = validateBatch;","map":{"version":3,"names":["errors_1","require","utils_1","common_1","BatchFlags","exports","validateBatchInnerTransaction","tx","index","TransactionType","ValidationError","hasFlag","GlobalFlags","tfInnerBatchTxn","validateOptionalField","isValue","paramName","txType","isNull","validateBatch","validateBaseTransaction","validateRequiredField","isArray","RawTransactions","forEach","rawTxObj","isRecord","rawTx","RawTransaction","_a","BatchSigners","signerObj","signerRecord","signer","BatchSigner","isString"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/transactions/batch.ts"],"sourcesContent":["import { ValidationError } from '../../errors'\nimport { Signer } from '../common'\nimport { hasFlag } from '../utils'\n\nimport {\n  BaseTransaction,\n  GlobalFlags,\n  GlobalFlagsInterface,\n  isArray,\n  isNull,\n  isRecord,\n  isString,\n  isValue,\n  validateBaseTransaction,\n  validateOptionalField,\n  validateRequiredField,\n} from './common'\nimport type { SubmittableTransaction } from './transaction'\n\n/**\n * Enum representing values of {@link Batch} transaction flags.\n *\n * @category Transaction Flags\n */\nexport enum BatchFlags {\n  tfAllOrNothing = 0x00010000,\n  tfOnlyOne = 0x00020000,\n  tfUntilFailure = 0x00040000,\n  tfIndependent = 0x00080000,\n}\n\n/**\n * Map of flags to boolean values representing {@link Batch} transaction\n * flags.\n *\n * @category Transaction Flags\n */\nexport interface BatchFlagsInterface extends GlobalFlagsInterface {\n  tfAllOrNothing?: boolean\n  tfOnlyOne?: boolean\n  tfUntilFailure?: boolean\n  tfIndependent?: boolean\n}\n\nexport interface BatchSigner {\n  BatchSigner: {\n    Account: string\n\n    SigningPubKey?: string\n\n    TxnSignature?: string\n\n    Signers?: Signer[]\n  }\n}\n\n/**\n * @category Transaction Models\n */\nexport interface Batch extends BaseTransaction {\n  TransactionType: 'Batch'\n\n  BatchSigners?: BatchSigner[]\n\n  RawTransactions: Array<{\n    RawTransaction: SubmittableTransaction\n  }>\n}\n\nfunction validateBatchInnerTransaction(\n  tx: Record<string, unknown>,\n  index: number,\n): void {\n  if (tx.TransactionType === 'Batch') {\n    throw new ValidationError(\n      `Batch: RawTransactions[${index}] is a Batch transaction. Cannot nest Batch transactions.`,\n    )\n  }\n\n  // Check for the `tfInnerBatchTxn` flag in the inner transactions\n  if (!hasFlag(tx, GlobalFlags.tfInnerBatchTxn, 'tfInnerBatchTxn')) {\n    throw new ValidationError(\n      `Batch: RawTransactions[${index}] must contain the \\`tfInnerBatchTxn\\` flag.`,\n    )\n  }\n  validateOptionalField(tx, 'Fee', isValue('0'), {\n    paramName: `RawTransactions[${index}].RawTransaction.Fee`,\n    txType: 'Batch',\n  })\n  validateOptionalField(tx, 'SigningPubKey', isValue(''), {\n    paramName: `RawTransactions[${index}].RawTransaction.SigningPubKey`,\n    txType: 'Batch',\n  })\n  validateOptionalField(tx, 'TxnSignature', isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.TxnSignature`,\n    txType: 'Batch',\n  })\n  validateOptionalField(tx, 'Signers', isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.Signers`,\n    txType: 'Batch',\n  })\n  validateOptionalField(tx, 'LastLedgerSequence', isNull, {\n    paramName: `RawTransactions[${index}].RawTransaction.LastLedgerSequence`,\n    txType: 'Batch',\n  })\n}\n\n/**\n * Verify the form and type of a Batch at runtime.\n *\n * @param tx - A Batch Transaction.\n * @throws When the Batch is malformed.\n */\n// eslint-disable-next-line max-lines-per-function -- needed here due to the complexity\nexport function validateBatch(tx: Record<string, unknown>): void {\n  validateBaseTransaction(tx)\n\n  validateRequiredField(tx, 'RawTransactions', isArray)\n\n  tx.RawTransactions.forEach((rawTxObj, index) => {\n    if (!isRecord(rawTxObj)) {\n      throw new ValidationError(\n        `Batch: RawTransactions[${index}] is not object.`,\n      )\n    }\n    validateRequiredField(rawTxObj, 'RawTransaction', isRecord, {\n      paramName: `RawTransactions[${index}].RawTransaction`,\n      txType: 'Batch',\n    })\n\n    const rawTx = rawTxObj.RawTransaction\n    validateBatchInnerTransaction(rawTx, index)\n\n    // Full validation of each `RawTransaction` object is done in `validate` to avoid dependency cycles\n  })\n\n  validateOptionalField(tx, 'BatchSigners', isArray)\n\n  tx.BatchSigners?.forEach((signerObj, index) => {\n    if (!isRecord(signerObj)) {\n      throw new ValidationError(`Batch: BatchSigners[${index}] is not object.`)\n    }\n\n    const signerRecord = signerObj\n    validateRequiredField(signerRecord, 'BatchSigner', isRecord, {\n      paramName: `BatchSigners[${index}].BatchSigner`,\n      txType: 'Batch',\n    })\n\n    const signer = signerRecord.BatchSigner\n    validateRequiredField(signer, 'Account', isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.Account`,\n      txType: 'Batch',\n    })\n    validateOptionalField(signer, 'SigningPubKey', isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.SigningPubKey`,\n      txType: 'Batch',\n    })\n    validateOptionalField(signer, 'TxnSignature', isString, {\n      paramName: `BatchSigners[${index}].BatchSigner.TxnSignature`,\n      txType: 'Batch',\n    })\n    validateOptionalField(signer, 'Signers', isArray, {\n      paramName: `BatchSigners[${index}].BatchSigner.Signers`,\n      txType: 'Batch',\n    })\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}