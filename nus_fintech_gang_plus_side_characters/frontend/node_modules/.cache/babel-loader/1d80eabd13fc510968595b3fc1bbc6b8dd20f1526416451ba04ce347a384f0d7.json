{"ast":null,"code":"\"use client\";\n\nvar _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useWallet } from \"../components/providers/WalletProvider\";\n\n// Configuration - Replace with your API keys\nconst XAMAN_API_KEY = process.env.NEXT_PUBLIC_XAMAN_API_KEY || \"\";\nconst WALLETCONNECT_PROJECT_ID = process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID || \"\";\nexport function useWalletManager() {\n  _s();\n  const {\n    walletManager,\n    setWalletManager,\n    setIsConnected,\n    setAccountInfo,\n    addEvent,\n    showStatus\n  } = useWallet();\n  useEffect(() => {\n    // Dynamic import to avoid SSR issues\n    const initWalletManager = async () => {\n      try {\n        const {\n          WalletManager,\n          XamanAdapter,\n          WalletConnectAdapter,\n          CrossmarkAdapter,\n          GemWalletAdapter\n        } = await import(\"xrpl-connect\");\n        const adapters = [];\n\n        // Only add Xaman if API key is available\n        if (XAMAN_API_KEY) {\n          adapters.push(new XamanAdapter({\n            apiKey: XAMAN_API_KEY\n          }));\n        }\n\n        // Only add WalletConnect if project ID is available\n        if (WALLETCONNECT_PROJECT_ID) {\n          adapters.push(new WalletConnectAdapter({\n            projectId: WALLETCONNECT_PROJECT_ID\n          }));\n        }\n\n        // Add browser extension wallets (no config needed)\n        adapters.push(new CrossmarkAdapter());\n        adapters.push(new GemWalletAdapter());\n        const manager = new WalletManager({\n          adapters,\n          network: \"testnet\",\n          autoConnect: true,\n          logger: {\n            level: \"info\"\n          }\n        });\n        setWalletManager(manager);\n\n        // Event listeners\n        manager.on(\"connect\", account => {\n          addEvent(\"Connected\", account);\n          updateConnectionState(manager);\n        });\n        manager.on(\"disconnect\", () => {\n          addEvent(\"Disconnected\", null);\n          updateConnectionState(manager);\n        });\n        manager.on(\"error\", error => {\n          addEvent(\"Error\", error);\n          showStatus(error.message, \"error\");\n        });\n\n        // Check initial connection status\n        if (!manager.connected) {\n          showStatus(\"Please connect a wallet to get started\", \"info\");\n        } else {\n          showStatus(\"Wallet reconnected from previous session\", \"success\");\n          updateConnectionState(manager);\n        }\n        console.log(\"XRPL Connect initialized\", manager);\n      } catch (error) {\n        console.error(\"Failed to initialize wallet manager:\", error);\n        showStatus(\"Failed to initialize wallet connection\", \"error\");\n      }\n    };\n    initWalletManager();\n  }, [setWalletManager, setIsConnected, setAccountInfo, addEvent, showStatus]);\n  const updateConnectionState = manager => {\n    const connected = manager.connected;\n    setIsConnected(connected);\n    if (connected) {\n      const account = manager.account;\n      const wallet = manager.wallet;\n      if (account && wallet) {\n        setAccountInfo({\n          address: account.address,\n          network: `${account.network.name} (${account.network.id})`,\n          walletName: wallet.name\n        });\n      }\n    } else {\n      setAccountInfo(null);\n    }\n  };\n  return {\n    walletManager\n  };\n}\n_s(useWalletManager, \"TlFYWup69b0748X/UMktIXcbVAY=\", false, function () {\n  return [useWallet];\n});","map":{"version":3,"names":["_s","$RefreshSig$","useEffect","useWallet","XAMAN_API_KEY","process","env","NEXT_PUBLIC_XAMAN_API_KEY","WALLETCONNECT_PROJECT_ID","NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID","useWalletManager","walletManager","setWalletManager","setIsConnected","setAccountInfo","addEvent","showStatus","initWalletManager","WalletManager","XamanAdapter","WalletConnectAdapter","CrossmarkAdapter","GemWalletAdapter","adapters","push","apiKey","projectId","manager","network","autoConnect","logger","level","on","account","updateConnectionState","error","message","connected","console","log","wallet","address","name","id","walletName"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/src/hooks/useWalletManager.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useWallet } from \"../components/providers/WalletProvider\";\n\n// Configuration - Replace with your API keys\nconst XAMAN_API_KEY = process.env.NEXT_PUBLIC_XAMAN_API_KEY || \"\";\nconst WALLETCONNECT_PROJECT_ID = process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID || \"\";\n\nexport function useWalletManager() {\n  const { walletManager, setWalletManager, setIsConnected, setAccountInfo, addEvent, showStatus } =\n    useWallet();\n\n  useEffect(() => {\n    // Dynamic import to avoid SSR issues\n    const initWalletManager = async () => {\n      try {\n        const {\n          WalletManager,\n          XamanAdapter,\n          WalletConnectAdapter,\n          CrossmarkAdapter,\n          GemWalletAdapter,\n        } = await import(\"xrpl-connect\");\n\n        const adapters = [];\n\n        // Only add Xaman if API key is available\n        if (XAMAN_API_KEY) {\n          adapters.push(new XamanAdapter({ apiKey: XAMAN_API_KEY }));\n        }\n\n        // Only add WalletConnect if project ID is available\n        if (WALLETCONNECT_PROJECT_ID) {\n          adapters.push(new WalletConnectAdapter({ projectId: WALLETCONNECT_PROJECT_ID }));\n        }\n\n        // Add browser extension wallets (no config needed)\n        adapters.push(new CrossmarkAdapter());\n        adapters.push(new GemWalletAdapter());\n\n        const manager = new WalletManager({\n          adapters,\n          network: \"testnet\",\n          autoConnect: true,\n          logger: { level: \"info\" },\n        });\n\n        setWalletManager(manager);\n\n        // Event listeners\n        manager.on(\"connect\", (account) => {\n          addEvent(\"Connected\", account);\n          updateConnectionState(manager);\n        });\n\n        manager.on(\"disconnect\", () => {\n          addEvent(\"Disconnected\", null);\n          updateConnectionState(manager);\n        });\n\n        manager.on(\"error\", (error) => {\n          addEvent(\"Error\", error);\n          showStatus(error.message, \"error\");\n        });\n\n        // Check initial connection status\n        if (!manager.connected) {\n          showStatus(\"Please connect a wallet to get started\", \"info\");\n        } else {\n          showStatus(\"Wallet reconnected from previous session\", \"success\");\n          updateConnectionState(manager);\n        }\n\n        console.log(\"XRPL Connect initialized\", manager);\n      } catch (error) {\n        console.error(\"Failed to initialize wallet manager:\", error);\n        showStatus(\"Failed to initialize wallet connection\", \"error\");\n      }\n    };\n\n    initWalletManager();\n  }, [setWalletManager, setIsConnected, setAccountInfo, addEvent, showStatus]);\n\n  const updateConnectionState = (manager) => {\n    const connected = manager.connected;\n    setIsConnected(connected);\n\n    if (connected) {\n      const account = manager.account;\n      const wallet = manager.wallet;\n\n      if (account && wallet) {\n        setAccountInfo({\n          address: account.address,\n          network: `${account.network.name} (${account.network.id})`,\n          walletName: wallet.name,\n        });\n      }\n    } else {\n      setAccountInfo(null);\n    }\n  };\n\n  return { walletManager };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}