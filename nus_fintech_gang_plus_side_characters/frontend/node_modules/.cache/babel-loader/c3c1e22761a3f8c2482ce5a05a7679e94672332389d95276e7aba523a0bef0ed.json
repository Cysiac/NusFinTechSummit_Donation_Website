{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAMMClawback = exports.AMMClawbackFlags = void 0;\nconst errors_1 = require(\"../../errors\");\nconst common_1 = require(\"./common\");\nvar AMMClawbackFlags;\n(function (AMMClawbackFlags) {\n  AMMClawbackFlags[AMMClawbackFlags[\"tfClawTwoAssets\"] = 1] = \"tfClawTwoAssets\";\n})(AMMClawbackFlags || (exports.AMMClawbackFlags = AMMClawbackFlags = {}));\nfunction validateAMMClawback(tx) {\n  (0, common_1.validateBaseTransaction)(tx);\n  (0, common_1.validateRequiredField)(tx, 'Holder', common_1.isAccount);\n  (0, common_1.validateRequiredField)(tx, 'Asset', common_1.isIssuedCurrency);\n  const asset = tx.Asset;\n  if (tx.Holder === asset.issuer) {\n    throw new errors_1.ValidationError('AMMClawback: Holder and Asset.issuer must be distinct');\n  }\n  if (tx.Account !== asset.issuer) {\n    throw new errors_1.ValidationError('AMMClawback: Account must be the same as Asset.issuer');\n  }\n  (0, common_1.validateRequiredField)(tx, 'Asset2', common_1.isIssuedCurrency);\n  (0, common_1.validateOptionalField)(tx, 'Amount', common_1.isIssuedCurrencyAmount);\n  if (tx.Amount != null) {\n    if (tx.Amount.currency !== asset.currency) {\n      throw new errors_1.ValidationError('AMMClawback: Amount.currency must match Asset.currency');\n    }\n    if (tx.Amount.issuer !== asset.issuer) {\n      throw new errors_1.ValidationError('AMMClawback: Amount.issuer must match Amount.issuer');\n    }\n  }\n}\nexports.validateAMMClawback = validateAMMClawback;","map":{"version":3,"names":["errors_1","require","common_1","AMMClawbackFlags","exports","validateAMMClawback","tx","validateBaseTransaction","validateRequiredField","isAccount","isIssuedCurrency","asset","Asset","Holder","issuer","ValidationError","Account","validateOptionalField","isIssuedCurrencyAmount","Amount","currency"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/transactions/AMMClawback.ts"],"sourcesContent":["import { ValidationError } from '../../errors'\nimport { Currency, IssuedCurrency, IssuedCurrencyAmount } from '../common'\n\nimport {\n  Account,\n  BaseTransaction,\n  GlobalFlagsInterface,\n  isAccount,\n  isIssuedCurrency,\n  isIssuedCurrencyAmount,\n  validateBaseTransaction,\n  validateOptionalField,\n  validateRequiredField,\n} from './common'\n\n/**\n * Enum representing values for AMMClawback Transaction Flags.\n *\n * @category Transaction Flags\n */\nexport enum AMMClawbackFlags {\n  tfClawTwoAssets = 0x00000001,\n}\n\n/**\n * Map of flags to boolean values representing {@link AMMClawback} transaction\n * flags.\n *\n * @category Transaction Flags\n */\nexport interface AMMClawbackFlagsInterface extends GlobalFlagsInterface {\n  tfClawTwoAssets?: boolean\n}\n\n/**\n * Claw back tokens from a holder that has deposited your issued tokens into an AMM pool.\n *\n * Clawback is disabled by default. To use clawback, you must send an AccountSet transaction to enable the\n * Allow Trust Line Clawback setting. An issuer with any existing tokens cannot enable clawback. You can\n * only enable Allow Trust Line Clawback if you have a completely empty owner directory, meaning you must\n * do so before you set up any trust lines, offers, escrows, payment channels, checks, or signer lists.\n * After you enable clawback, it cannot reverted: the account permanently gains the ability to claw back\n * issued assets on trust lines.\n */\nexport interface AMMClawback extends BaseTransaction {\n  TransactionType: 'AMMClawback'\n\n  /**\n   * The account holding the asset to be clawed back.\n   */\n  Holder: Account\n\n  /**\n   * Specifies the asset that the issuer wants to claw back from the AMM pool.\n   * In JSON, this is an object with currency and issuer fields. The issuer field must match with Account.\n   */\n  Asset: IssuedCurrency\n\n  /**\n   * Specifies the other asset in the AMM's pool. In JSON, this is an object with currency and\n   * issuer fields (omit issuer for XRP).\n   */\n  Asset2: Currency\n\n  /**\n   * The maximum amount to claw back from the AMM account. The currency and issuer subfields should match\n   * the Asset subfields. If this field isn't specified, or the value subfield exceeds the holder's available\n   * tokens in the AMM, all of the holder's tokens will be clawed back.\n   */\n  Amount?: IssuedCurrencyAmount\n}\n\n/**\n * Verify the form and type of an AMMClawback at runtime.\n *\n * @param tx - An AMMClawback Transaction.\n * @throws {ValidationError} When the transaction is malformed.\n */\nexport function validateAMMClawback(tx: Record<string, unknown>): void {\n  validateBaseTransaction(tx)\n\n  validateRequiredField(tx, 'Holder', isAccount)\n\n  validateRequiredField(tx, 'Asset', isIssuedCurrency)\n\n  const asset = tx.Asset\n\n  if (tx.Holder === asset.issuer) {\n    throw new ValidationError(\n      'AMMClawback: Holder and Asset.issuer must be distinct',\n    )\n  }\n\n  if (tx.Account !== asset.issuer) {\n    throw new ValidationError(\n      'AMMClawback: Account must be the same as Asset.issuer',\n    )\n  }\n\n  validateRequiredField(tx, 'Asset2', isIssuedCurrency)\n\n  validateOptionalField(tx, 'Amount', isIssuedCurrencyAmount)\n\n  if (tx.Amount != null) {\n    if (tx.Amount.currency !== asset.currency) {\n      throw new ValidationError(\n        'AMMClawback: Amount.currency must match Asset.currency',\n      )\n    }\n\n    if (tx.Amount.issuer !== asset.issuer) {\n      throw new ValidationError(\n        'AMMClawback: Amount.issuer must match Amount.issuer',\n      )\n    }\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AAGA,MAAAC,QAAA,GAAAD,OAAA;AAiBA,IAAYE,gBAEX;AAFD,WAAYA,gBAAgB;EAC1BA,gBAAA,CAAAA,gBAAA,4CAA4B;AAC9B,CAAC,EAFWA,gBAAgB,KAAAC,OAAA,CAAAD,gBAAA,GAAhBA,gBAAgB;AA0D5B,SAAgBE,mBAAmBA,CAACC,EAA2B;EAC7D,IAAAJ,QAAA,CAAAK,uBAAuB,EAACD,EAAE,CAAC;EAE3B,IAAAJ,QAAA,CAAAM,qBAAqB,EAACF,EAAE,EAAE,QAAQ,EAAEJ,QAAA,CAAAO,SAAS,CAAC;EAE9C,IAAAP,QAAA,CAAAM,qBAAqB,EAACF,EAAE,EAAE,OAAO,EAAEJ,QAAA,CAAAQ,gBAAgB,CAAC;EAEpD,MAAMC,KAAK,GAAGL,EAAE,CAACM,KAAK;EAEtB,IAAIN,EAAE,CAACO,MAAM,KAAKF,KAAK,CAACG,MAAM,EAAE;IAC9B,MAAM,IAAId,QAAA,CAAAe,eAAe,CACvB,uDAAuD,CACxD;;EAGH,IAAIT,EAAE,CAACU,OAAO,KAAKL,KAAK,CAACG,MAAM,EAAE;IAC/B,MAAM,IAAId,QAAA,CAAAe,eAAe,CACvB,uDAAuD,CACxD;;EAGH,IAAAb,QAAA,CAAAM,qBAAqB,EAACF,EAAE,EAAE,QAAQ,EAAEJ,QAAA,CAAAQ,gBAAgB,CAAC;EAErD,IAAAR,QAAA,CAAAe,qBAAqB,EAACX,EAAE,EAAE,QAAQ,EAAEJ,QAAA,CAAAgB,sBAAsB,CAAC;EAE3D,IAAIZ,EAAE,CAACa,MAAM,IAAI,IAAI,EAAE;IACrB,IAAIb,EAAE,CAACa,MAAM,CAACC,QAAQ,KAAKT,KAAK,CAACS,QAAQ,EAAE;MACzC,MAAM,IAAIpB,QAAA,CAAAe,eAAe,CACvB,wDAAwD,CACzD;;IAGH,IAAIT,EAAE,CAACa,MAAM,CAACL,MAAM,KAAKH,KAAK,CAACG,MAAM,EAAE;MACrC,MAAM,IAAId,QAAA,CAAAe,eAAe,CACvB,qDAAqD,CACtD;;;AAGP;AAtCAX,OAAA,CAAAC,mBAAA,GAAAA,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}