{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateMPTokenIssuanceCreate = exports.MPTokenIssuanceCreateFlags = void 0;\nconst errors_1 = require(\"../../errors\");\nconst utils_1 = require(\"../utils\");\nconst mptokenMetadata_1 = require(\"../utils/mptokenMetadata\");\nconst common_1 = require(\"./common\");\nconst MAX_AMT = '9223372036854775807';\nconst MAX_TRANSFER_FEE = 50000;\nvar MPTokenIssuanceCreateFlags;\n(function (MPTokenIssuanceCreateFlags) {\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTCanLock\"] = 2] = \"tfMPTCanLock\";\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTRequireAuth\"] = 4] = \"tfMPTRequireAuth\";\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTCanEscrow\"] = 8] = \"tfMPTCanEscrow\";\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTCanTrade\"] = 16] = \"tfMPTCanTrade\";\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTCanTransfer\"] = 32] = \"tfMPTCanTransfer\";\n  MPTokenIssuanceCreateFlags[MPTokenIssuanceCreateFlags[\"tfMPTCanClawback\"] = 64] = \"tfMPTCanClawback\";\n})(MPTokenIssuanceCreateFlags || (exports.MPTokenIssuanceCreateFlags = MPTokenIssuanceCreateFlags = {}));\nfunction validateMPTokenIssuanceCreate(tx) {\n  var _a, _b;\n  (0, common_1.validateBaseTransaction)(tx);\n  (0, common_1.validateOptionalField)(tx, 'MaximumAmount', common_1.isString);\n  (0, common_1.validateOptionalField)(tx, 'MPTokenMetadata', common_1.isString);\n  (0, common_1.validateOptionalField)(tx, 'TransferFee', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'AssetScale', common_1.isNumber);\n  if (typeof tx.MPTokenMetadata === 'string' && (!(0, utils_1.isHex)(tx.MPTokenMetadata) || tx.MPTokenMetadata.length / 2 > mptokenMetadata_1.MAX_MPT_META_BYTE_LENGTH)) {\n    throw new errors_1.ValidationError(`MPTokenIssuanceCreate: MPTokenMetadata (hex format) must be non-empty and no more than ${mptokenMetadata_1.MAX_MPT_META_BYTE_LENGTH} bytes.`);\n  }\n  if (typeof tx.MaximumAmount === 'string') {\n    if (!utils_1.INTEGER_SANITY_CHECK.exec(tx.MaximumAmount)) {\n      throw new errors_1.ValidationError('MPTokenIssuanceCreate: Invalid MaximumAmount');\n    } else if (BigInt(tx.MaximumAmount) > BigInt(MAX_AMT) || BigInt(tx.MaximumAmount) < BigInt(`0`)) {\n      throw new errors_1.ValidationError('MPTokenIssuanceCreate: MaximumAmount out of range');\n    }\n  }\n  if (typeof tx.TransferFee === 'number') {\n    const flags = (_a = tx.Flags) !== null && _a !== void 0 ? _a : 0;\n    const isTfMPTCanTransfer = typeof flags === 'number' ? (0, utils_1.isFlagEnabled)(flags, MPTokenIssuanceCreateFlags.tfMPTCanTransfer) : (_b = flags.tfMPTCanTransfer) !== null && _b !== void 0 ? _b : false;\n    if (tx.TransferFee < 0 || tx.TransferFee > MAX_TRANSFER_FEE) {\n      throw new errors_1.ValidationError(`MPTokenIssuanceCreate: TransferFee must be between 0 and ${MAX_TRANSFER_FEE}`);\n    }\n    if (tx.TransferFee && !isTfMPTCanTransfer) {\n      throw new errors_1.ValidationError('MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag');\n    }\n  }\n  if (tx.MPTokenMetadata != null) {\n    const validationMessages = (0, mptokenMetadata_1.validateMPTokenMetadata)(tx.MPTokenMetadata);\n    if (validationMessages.length > 0) {\n      const message = [mptokenMetadata_1.MPT_META_WARNING_HEADER, ...validationMessages.map(msg => `- ${msg}`)].join('\\n');\n      console.warn(message);\n    }\n  }\n}\nexports.validateMPTokenIssuanceCreate = validateMPTokenIssuanceCreate;","map":{"version":3,"names":["errors_1","require","utils_1","mptokenMetadata_1","common_1","MAX_AMT","MAX_TRANSFER_FEE","MPTokenIssuanceCreateFlags","exports","validateMPTokenIssuanceCreate","tx","validateBaseTransaction","validateOptionalField","isString","isNumber","MPTokenMetadata","isHex","length","MAX_MPT_META_BYTE_LENGTH","ValidationError","MaximumAmount","INTEGER_SANITY_CHECK","exec","BigInt","TransferFee","flags","_a","Flags","isTfMPTCanTransfer","isFlagEnabled","tfMPTCanTransfer","_b","validationMessages","validateMPTokenMetadata","message","MPT_META_WARNING_HEADER","map","msg","join","console","warn"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/transactions/MPTokenIssuanceCreate.ts"],"sourcesContent":["import { ValidationError } from '../../errors'\nimport { isHex, INTEGER_SANITY_CHECK, isFlagEnabled } from '../utils'\nimport {\n  MAX_MPT_META_BYTE_LENGTH,\n  MPT_META_WARNING_HEADER,\n  validateMPTokenMetadata,\n} from '../utils/mptokenMetadata'\n\nimport {\n  BaseTransaction,\n  GlobalFlagsInterface,\n  validateBaseTransaction,\n  validateOptionalField,\n  isString,\n  isNumber,\n} from './common'\nimport type { TransactionMetadataBase } from './metadata'\n\n// 2^63 - 1\nconst MAX_AMT = '9223372036854775807'\nconst MAX_TRANSFER_FEE = 50000\n\n/**\n * Transaction Flags for an MPTokenIssuanceCreate Transaction.\n *\n * @category Transaction Flags\n */\nexport enum MPTokenIssuanceCreateFlags {\n  /**\n   * If set, indicates that the MPT can be locked both individually and globally.\n   * If not set, the MPT cannot be locked in any way.\n   */\n  tfMPTCanLock = 0x00000002,\n  /**\n   * If set, indicates that individual holders must be authorized.\n   * This enables issuers to limit who can hold their assets.\n   */\n  tfMPTRequireAuth = 0x00000004,\n  /**\n   * If set, indicates that individual holders can place their balances into an escrow.\n   */\n  tfMPTCanEscrow = 0x00000008,\n  /**\n   * If set, indicates that individual holders can trade their balances\n   *  using the XRP Ledger DEX or AMM.\n   */\n  tfMPTCanTrade = 0x00000010,\n  /**\n   * If set, indicates that tokens may be transferred to other accounts\n   *  that are not the issuer.\n   */\n  tfMPTCanTransfer = 0x00000020,\n  /**\n   * If set, indicates that the issuer may use the Clawback transaction\n   * to clawback value from individual holders.\n   */\n  tfMPTCanClawback = 0x00000040,\n}\n\n/**\n * Map of flags to boolean values representing {@link MPTokenIssuanceCreate} transaction\n * flags.\n *\n * @category Transaction Flags\n */\nexport interface MPTokenIssuanceCreateFlagsInterface\n  extends GlobalFlagsInterface {\n  tfMPTCanLock?: boolean\n  tfMPTRequireAuth?: boolean\n  tfMPTCanEscrow?: boolean\n  tfMPTCanTrade?: boolean\n  tfMPTCanTransfer?: boolean\n  tfMPTCanClawback?: boolean\n}\n\n/**\n * The MPTokenIssuanceCreate transaction creates a MPTokenIssuance object\n * and adds it to the relevant directory node of the creator account.\n * This transaction is the only opportunity an issuer has to specify any token fields\n * that are defined as immutable (e.g., MPT Flags). If the transaction is successful,\n * the newly created token will be owned by the account (the creator account) which\n * executed the transaction.\n */\nexport interface MPTokenIssuanceCreate extends BaseTransaction {\n  TransactionType: 'MPTokenIssuanceCreate'\n  /**\n   * An asset scale is the difference, in orders of magnitude, between a standard unit and\n   * a corresponding fractional unit. More formally, the asset scale is a non-negative integer\n   * (0, 1, 2, â€¦) such that one standard unit equals 10^(-scale) of a corresponding\n   * fractional unit. If the fractional unit equals the standard unit, then the asset scale is 0.\n   * Note that this value is optional, and will default to 0 if not supplied.\n   */\n  AssetScale?: number\n  /**\n   * Specifies the maximum asset amount of this token that should ever be issued.\n   * It is a non-negative integer string that can store a range of up to 63 bits. If not set, the max\n   * amount will default to the largest unsigned 63-bit integer (0x7FFFFFFFFFFFFFFF or 9223372036854775807)\n   *\n   * Example:\n   * ```\n   * MaximumAmount: '9223372036854775807'\n   * ```\n   */\n  MaximumAmount?: string\n  /**\n   * Specifies the fee to charged by the issuer for secondary sales of the Token,\n   * if such sales are allowed. Valid values for this field are between 0 and 50,000 inclusive,\n   * allowing transfer rates of between 0.000% and 50.000% in increments of 0.001.\n   * The field must NOT be present if the `tfMPTCanTransfer` flag is not set.\n   */\n  TransferFee?: number\n\n  /**\n   * Should follow {@link https://github.com/XRPLF/XRPL-Standards/tree/master/XLS-0089-multi-purpose-token-metadata-schema | XLS-89} standard.\n   * Use {@link encodeMPTokenMetadata} utility function to convert to convert {@link MPTokenMetadata} to a blob.\n   * Use {@link decodeMPTokenMetadata} utility function to convert from a blob to {@link MPTokenMetadata}.\n   *\n   * While adherence to the XLS-89d format is not mandatory, non-compliant metadata\n   * may not be discoverable by ecosystem tools such as explorers and indexers.\n   */\n  MPTokenMetadata?: string\n\n  Flags?: number | MPTokenIssuanceCreateFlagsInterface\n}\n\nexport interface MPTokenIssuanceCreateMetadata extends TransactionMetadataBase {\n  mpt_issuance_id?: string\n}\n\n/* eslint-disable max-lines-per-function -- Not needed to reduce function */\n/**\n * Verify the form and type of an MPTokenIssuanceCreate at runtime.\n *\n * @param tx - An MPTokenIssuanceCreate Transaction.\n * @throws When the MPTokenIssuanceCreate is Malformed.\n */\nexport function validateMPTokenIssuanceCreate(\n  tx: Record<string, unknown>,\n): void {\n  validateBaseTransaction(tx)\n  validateOptionalField(tx, 'MaximumAmount', isString)\n  validateOptionalField(tx, 'MPTokenMetadata', isString)\n  validateOptionalField(tx, 'TransferFee', isNumber)\n  validateOptionalField(tx, 'AssetScale', isNumber)\n\n  if (\n    typeof tx.MPTokenMetadata === 'string' &&\n    (!isHex(tx.MPTokenMetadata) ||\n      tx.MPTokenMetadata.length / 2 > MAX_MPT_META_BYTE_LENGTH)\n  ) {\n    throw new ValidationError(\n      `MPTokenIssuanceCreate: MPTokenMetadata (hex format) must be non-empty and no more than ${MAX_MPT_META_BYTE_LENGTH} bytes.`,\n    )\n  }\n\n  if (typeof tx.MaximumAmount === 'string') {\n    if (!INTEGER_SANITY_CHECK.exec(tx.MaximumAmount)) {\n      throw new ValidationError('MPTokenIssuanceCreate: Invalid MaximumAmount')\n    } else if (\n      BigInt(tx.MaximumAmount) > BigInt(MAX_AMT) ||\n      BigInt(tx.MaximumAmount) < BigInt(`0`)\n    ) {\n      throw new ValidationError(\n        'MPTokenIssuanceCreate: MaximumAmount out of range',\n      )\n    }\n  }\n\n  if (typeof tx.TransferFee === 'number') {\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions -- Not necessary\n    const flags = (tx.Flags ?? 0) as\n      | number\n      | MPTokenIssuanceCreateFlagsInterface\n    const isTfMPTCanTransfer =\n      typeof flags === 'number'\n        ? isFlagEnabled(flags, MPTokenIssuanceCreateFlags.tfMPTCanTransfer)\n        : (flags.tfMPTCanTransfer ?? false)\n\n    if (tx.TransferFee < 0 || tx.TransferFee > MAX_TRANSFER_FEE) {\n      throw new ValidationError(\n        `MPTokenIssuanceCreate: TransferFee must be between 0 and ${MAX_TRANSFER_FEE}`,\n      )\n    }\n\n    if (tx.TransferFee && !isTfMPTCanTransfer) {\n      throw new ValidationError(\n        'MPTokenIssuanceCreate: TransferFee cannot be provided without enabling tfMPTCanTransfer flag',\n      )\n    }\n  }\n\n  if (tx.MPTokenMetadata != null) {\n    const validationMessages = validateMPTokenMetadata(tx.MPTokenMetadata)\n\n    if (validationMessages.length > 0) {\n      const message = [\n        MPT_META_WARNING_HEADER,\n        ...validationMessages.map((msg) => `- ${msg}`),\n      ].join('\\n')\n\n      // eslint-disable-next-line no-console -- Required here.\n      console.warn(message)\n    }\n  }\n}\n/* eslint-enable max-lines-per-function */\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}