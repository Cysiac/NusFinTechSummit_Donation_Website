{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateLoanSet = exports.LoanSetFlags = void 0;\nconst errors_1 = require(\"../../errors\");\nconst common_1 = require(\"./common\");\nconst MAX_DATA_LENGTH = 512;\nconst MAX_OVER_PAYMENT_FEE_RATE = 100000;\nconst MAX_INTEREST_RATE = 100000;\nconst MAX_LATE_INTEREST_RATE = 100000;\nconst MAX_CLOSE_INTEREST_RATE = 100000;\nconst MAX_OVER_PAYMENT_INTEREST_RATE = 100000;\nconst MIN_PAYMENT_INTERVAL = 60;\nvar LoanSetFlags;\n(function (LoanSetFlags) {\n  LoanSetFlags[LoanSetFlags[\"tfLoanOverpayment\"] = 65536] = \"tfLoanOverpayment\";\n})(LoanSetFlags || (exports.LoanSetFlags = LoanSetFlags = {}));\nfunction validateLoanSet(tx) {\n  (0, common_1.validateBaseTransaction)(tx);\n  (0, common_1.validateRequiredField)(tx, 'LoanBrokerID', common_1.isString);\n  (0, common_1.validateRequiredField)(tx, 'PrincipalRequested', common_1.isXRPLNumber);\n  (0, common_1.validateOptionalField)(tx, 'CounterpartySignature', common_1.isRecord);\n  (0, common_1.validateOptionalField)(tx, 'Data', common_1.isString);\n  (0, common_1.validateOptionalField)(tx, 'Counterparty', common_1.isAccount);\n  (0, common_1.validateOptionalField)(tx, 'LoanOriginationFee', common_1.isXRPLNumber);\n  (0, common_1.validateOptionalField)(tx, 'LoanServiceFee', common_1.isXRPLNumber);\n  (0, common_1.validateOptionalField)(tx, 'LatePaymentFee', common_1.isXRPLNumber);\n  (0, common_1.validateOptionalField)(tx, 'ClosePaymentFee', common_1.isXRPLNumber);\n  (0, common_1.validateOptionalField)(tx, 'OverpaymentFee', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'InterestRate', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'LateInterestRate', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'CloseInterestRate', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'OverpaymentInterestRate', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'PaymentTotal', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'PaymentInterval', common_1.isNumber);\n  (0, common_1.validateOptionalField)(tx, 'GracePeriod', common_1.isNumber);\n  if (!(0, common_1.isLedgerEntryId)(tx.LoanBrokerID)) {\n    throw new errors_1.ValidationError(`LoanSet: LoanBrokerID must be 64 characters hexadecimal string`);\n  }\n  if (tx.Data != null && !(0, common_1.validateHexMetadata)(tx.Data, MAX_DATA_LENGTH)) {\n    throw new errors_1.ValidationError(`LoanSet: Data must be a valid non-empty hex string up to ${MAX_DATA_LENGTH} characters`);\n  }\n  if (tx.OverpaymentFee != null && (tx.OverpaymentFee < 0 || tx.OverpaymentFee > MAX_OVER_PAYMENT_FEE_RATE)) {\n    throw new errors_1.ValidationError(`LoanSet: OverpaymentFee must be between 0 and ${MAX_OVER_PAYMENT_FEE_RATE} inclusive`);\n  }\n  if (tx.InterestRate != null && (tx.InterestRate < 0 || tx.InterestRate > MAX_INTEREST_RATE)) {\n    throw new errors_1.ValidationError(`LoanSet: InterestRate must be between 0 and ${MAX_INTEREST_RATE} inclusive`);\n  }\n  if (tx.LateInterestRate != null && (tx.LateInterestRate < 0 || tx.LateInterestRate > MAX_LATE_INTEREST_RATE)) {\n    throw new errors_1.ValidationError(`LoanSet: LateInterestRate must be between 0 and ${MAX_LATE_INTEREST_RATE} inclusive`);\n  }\n  if (tx.CloseInterestRate != null && (tx.CloseInterestRate < 0 || tx.CloseInterestRate > MAX_CLOSE_INTEREST_RATE)) {\n    throw new errors_1.ValidationError(`LoanSet: CloseInterestRate must be between 0 and ${MAX_CLOSE_INTEREST_RATE} inclusive`);\n  }\n  if (tx.OverpaymentInterestRate != null && (tx.OverpaymentInterestRate < 0 || tx.OverpaymentInterestRate > MAX_OVER_PAYMENT_INTEREST_RATE)) {\n    throw new errors_1.ValidationError(`LoanSet: OverpaymentInterestRate must be between 0 and ${MAX_OVER_PAYMENT_INTEREST_RATE} inclusive`);\n  }\n  if (tx.PaymentInterval != null && tx.PaymentInterval < MIN_PAYMENT_INTERVAL) {\n    throw new errors_1.ValidationError(`LoanSet: PaymentInterval must be greater than or equal to ${MIN_PAYMENT_INTERVAL}`);\n  }\n  if (tx.PaymentInterval != null && tx.GracePeriod != null && tx.GracePeriod > tx.PaymentInterval) {\n    throw new errors_1.ValidationError(`LoanSet: GracePeriod must not be greater than PaymentInterval`);\n  }\n}\nexports.validateLoanSet = validateLoanSet;","map":{"version":3,"names":["errors_1","require","common_1","MAX_DATA_LENGTH","MAX_OVER_PAYMENT_FEE_RATE","MAX_INTEREST_RATE","MAX_LATE_INTEREST_RATE","MAX_CLOSE_INTEREST_RATE","MAX_OVER_PAYMENT_INTEREST_RATE","MIN_PAYMENT_INTERVAL","LoanSetFlags","exports","validateLoanSet","tx","validateBaseTransaction","validateRequiredField","isString","isXRPLNumber","validateOptionalField","isRecord","isAccount","isNumber","isLedgerEntryId","LoanBrokerID","ValidationError","Data","validateHexMetadata","OverpaymentFee","InterestRate","LateInterestRate","CloseInterestRate","OverpaymentInterestRate","PaymentInterval","GracePeriod"],"sources":["/Users/caiyongsheng/Developer/nus_fintech_project/nus_fintech_gang_plus_side_characters/frontend/node_modules/xrpl/src/models/transactions/loanSet.ts"],"sourcesContent":["import { ValidationError } from '../../errors'\nimport { Signer } from '../common'\n\nimport {\n  BaseTransaction,\n  validateHexMetadata,\n  isLedgerEntryId,\n  isNumber,\n  isXRPLNumber,\n  validateBaseTransaction,\n  validateOptionalField,\n  isString,\n  validateRequiredField,\n  XRPLNumber,\n  GlobalFlagsInterface,\n  Account,\n  isAccount,\n  isRecord,\n} from './common'\n\nconst MAX_DATA_LENGTH = 512\nconst MAX_OVER_PAYMENT_FEE_RATE = 100_000\nconst MAX_INTEREST_RATE = 100_000\nconst MAX_LATE_INTEREST_RATE = 100_000\nconst MAX_CLOSE_INTEREST_RATE = 100_000\nconst MAX_OVER_PAYMENT_INTEREST_RATE = 100_000\nconst MIN_PAYMENT_INTERVAL = 60\n\n/**\n * The transaction creates a new Loan object.\n *\n * @category Transaction Models\n */\nexport interface LoanSet extends BaseTransaction {\n  TransactionType: 'LoanSet'\n\n  /**\n   * The Loan Broker ID associated with the loan.\n   */\n  LoanBrokerID: string\n\n  /**\n   * The principal amount requested by the Borrower.\n   */\n  PrincipalRequested: XRPLNumber\n\n  /**\n   * The signature of the counterparty over the transaction.\n   */\n  CounterpartySignature?: CounterpartySignature\n\n  /**\n   * The address of the counterparty of the Loan.\n   */\n  Counterparty?: Account\n\n  /**\n   * Arbitrary metadata in hex format. The field is limited to 512 characters.\n   */\n  Data?: string\n\n  /**\n   * A nominal funds amount paid to the LoanBroker.Owner when the Loan is created.\n   */\n  LoanOriginationFee?: XRPLNumber\n\n  /**\n   * A nominal amount paid to the LoanBroker.Owner with every Loan payment.\n   */\n  LoanServiceFee?: XRPLNumber\n\n  /**\n   * A nominal funds amount paid to the LoanBroker.Owner when a payment is late.\n   */\n  LatePaymentFee?: XRPLNumber\n\n  /**\n   * A nominal funds amount paid to the LoanBroker.Owner when an early full repayment is made.\n   */\n  ClosePaymentFee?: XRPLNumber\n\n  /**\n   * A fee charged on overpayments in 1/10th basis points. Valid values are between 0 and 100000 inclusive. (0 - 100%)\n   */\n  OverpaymentFee?: number\n\n  /**\n   * Annualized interest rate of the Loan in in 1/10th basis points. Valid values are between 0 and 100000 inclusive. (0 - 100%)\n   */\n  InterestRate?: number\n\n  /**\n   * A premium added to the interest rate for late payments in in 1/10th basis points.\n   * Valid values are between 0 and 100000 inclusive. (0 - 100%)\n   */\n  LateInterestRate?: number\n\n  /**\n   * A Fee Rate charged for repaying the Loan early in 1/10th basis points.\n   * Valid values are between 0 and 100000 inclusive. (0 - 100%)\n   */\n  CloseInterestRate?: number\n\n  /**\n   * An interest rate charged on over payments in 1/10th basis points. Valid values are between 0 and 100000 inclusive. (0 - 100%)\n   */\n  OverpaymentInterestRate?: number\n\n  /**\n   * The total number of payments to be made against the Loan.\n   */\n  PaymentTotal?: number\n\n  /**\n   * Number of seconds between Loan payments.\n   */\n  PaymentInterval?: number\n\n  /**\n   * The number of seconds after the Loan's Payment Due Date can be Defaulted.\n   */\n  GracePeriod?: number\n\n  Flags?: number | LoanSetFlagsInterface\n}\n\n/**\n * An inner object that contains the signature of the Lender over the transaction.\n */\nexport interface CounterpartySignature {\n  /**\n   * The Public Key to be used to verify the validity of the signature.\n   */\n  SigningPubKey?: string\n\n  /**\n   * The signature of over all signing fields.\n   */\n  TxnSignature?: string\n\n  /**\n   * An array of transaction signatures from the Counterparty signers to indicate their approval of this transaction.\n   */\n  Signers?: Signer[]\n}\n\n/**\n * Transaction Flags for an LoanSet Transaction.\n *\n * @category Transaction Flags\n */\nexport enum LoanSetFlags {\n  /**\n   * Indicates that the loan supports over payments.\n   */\n  tfLoanOverpayment = 0x00010000,\n}\n\n/**\n * Map of flags to boolean values representing {@link LoanSet} transaction\n * flags.\n *\n * @category Transaction Flags\n */\nexport interface LoanSetFlagsInterface extends GlobalFlagsInterface {\n  tfLoanOverpayment?: boolean\n}\n\n/**\n * Verify the form and type of an LoanSet at runtime.\n *\n * @param tx - LoanSet Transaction.\n * @throws When LoanSet is Malformed.\n */\n// eslint-disable-next-line max-lines-per-function, max-statements -- due to many validations\nexport function validateLoanSet(tx: Record<string, unknown>): void {\n  validateBaseTransaction(tx)\n\n  validateRequiredField(tx, 'LoanBrokerID', isString)\n  validateRequiredField(tx, 'PrincipalRequested', isXRPLNumber)\n  validateOptionalField(tx, 'CounterpartySignature', isRecord)\n  validateOptionalField(tx, 'Data', isString)\n  validateOptionalField(tx, 'Counterparty', isAccount)\n  validateOptionalField(tx, 'LoanOriginationFee', isXRPLNumber)\n  validateOptionalField(tx, 'LoanServiceFee', isXRPLNumber)\n  validateOptionalField(tx, 'LatePaymentFee', isXRPLNumber)\n  validateOptionalField(tx, 'ClosePaymentFee', isXRPLNumber)\n  validateOptionalField(tx, 'OverpaymentFee', isNumber)\n  validateOptionalField(tx, 'InterestRate', isNumber)\n  validateOptionalField(tx, 'LateInterestRate', isNumber)\n  validateOptionalField(tx, 'CloseInterestRate', isNumber)\n  validateOptionalField(tx, 'OverpaymentInterestRate', isNumber)\n  validateOptionalField(tx, 'PaymentTotal', isNumber)\n  validateOptionalField(tx, 'PaymentInterval', isNumber)\n  validateOptionalField(tx, 'GracePeriod', isNumber)\n\n  if (!isLedgerEntryId(tx.LoanBrokerID)) {\n    throw new ValidationError(\n      `LoanSet: LoanBrokerID must be 64 characters hexadecimal string`,\n    )\n  }\n\n  if (tx.Data != null && !validateHexMetadata(tx.Data, MAX_DATA_LENGTH)) {\n    throw new ValidationError(\n      `LoanSet: Data must be a valid non-empty hex string up to ${MAX_DATA_LENGTH} characters`,\n    )\n  }\n\n  if (\n    tx.OverpaymentFee != null &&\n    (tx.OverpaymentFee < 0 || tx.OverpaymentFee > MAX_OVER_PAYMENT_FEE_RATE)\n  ) {\n    throw new ValidationError(\n      `LoanSet: OverpaymentFee must be between 0 and ${MAX_OVER_PAYMENT_FEE_RATE} inclusive`,\n    )\n  }\n\n  if (\n    tx.InterestRate != null &&\n    (tx.InterestRate < 0 || tx.InterestRate > MAX_INTEREST_RATE)\n  ) {\n    throw new ValidationError(\n      `LoanSet: InterestRate must be between 0 and ${MAX_INTEREST_RATE} inclusive`,\n    )\n  }\n\n  if (\n    tx.LateInterestRate != null &&\n    (tx.LateInterestRate < 0 || tx.LateInterestRate > MAX_LATE_INTEREST_RATE)\n  ) {\n    throw new ValidationError(\n      `LoanSet: LateInterestRate must be between 0 and ${MAX_LATE_INTEREST_RATE} inclusive`,\n    )\n  }\n\n  if (\n    tx.CloseInterestRate != null &&\n    (tx.CloseInterestRate < 0 || tx.CloseInterestRate > MAX_CLOSE_INTEREST_RATE)\n  ) {\n    throw new ValidationError(\n      `LoanSet: CloseInterestRate must be between 0 and ${MAX_CLOSE_INTEREST_RATE} inclusive`,\n    )\n  }\n\n  if (\n    tx.OverpaymentInterestRate != null &&\n    (tx.OverpaymentInterestRate < 0 ||\n      tx.OverpaymentInterestRate > MAX_OVER_PAYMENT_INTEREST_RATE)\n  ) {\n    throw new ValidationError(\n      `LoanSet: OverpaymentInterestRate must be between 0 and ${MAX_OVER_PAYMENT_INTEREST_RATE} inclusive`,\n    )\n  }\n\n  if (tx.PaymentInterval != null && tx.PaymentInterval < MIN_PAYMENT_INTERVAL) {\n    throw new ValidationError(\n      `LoanSet: PaymentInterval must be greater than or equal to ${MIN_PAYMENT_INTERVAL}`,\n    )\n  }\n\n  if (\n    tx.PaymentInterval != null &&\n    tx.GracePeriod != null &&\n    tx.GracePeriod > tx.PaymentInterval\n  ) {\n    throw new ValidationError(\n      `LoanSet: GracePeriod must not be greater than PaymentInterval`,\n    )\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AAGA,MAAAC,QAAA,GAAAD,OAAA;AAiBA,MAAME,eAAe,GAAG,GAAG;AAC3B,MAAMC,yBAAyB,GAAG,MAAO;AACzC,MAAMC,iBAAiB,GAAG,MAAO;AACjC,MAAMC,sBAAsB,GAAG,MAAO;AACtC,MAAMC,uBAAuB,GAAG,MAAO;AACvC,MAAMC,8BAA8B,GAAG,MAAO;AAC9C,MAAMC,oBAAoB,GAAG,EAAE;AA6H/B,IAAYC,YAKX;AALD,WAAYA,YAAY;EAItBA,YAAA,CAAAA,YAAA,oDAA8B;AAChC,CAAC,EALWA,YAAY,KAAAC,OAAA,CAAAD,YAAA,GAAZA,YAAY;AAwBxB,SAAgBE,eAAeA,CAACC,EAA2B;EACzD,IAAAX,QAAA,CAAAY,uBAAuB,EAACD,EAAE,CAAC;EAE3B,IAAAX,QAAA,CAAAa,qBAAqB,EAACF,EAAE,EAAE,cAAc,EAAEX,QAAA,CAAAc,QAAQ,CAAC;EACnD,IAAAd,QAAA,CAAAa,qBAAqB,EAACF,EAAE,EAAE,oBAAoB,EAAEX,QAAA,CAAAe,YAAY,CAAC;EAC7D,IAAAf,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,uBAAuB,EAAEX,QAAA,CAAAiB,QAAQ,CAAC;EAC5D,IAAAjB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,MAAM,EAAEX,QAAA,CAAAc,QAAQ,CAAC;EAC3C,IAAAd,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,cAAc,EAAEX,QAAA,CAAAkB,SAAS,CAAC;EACpD,IAAAlB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,oBAAoB,EAAEX,QAAA,CAAAe,YAAY,CAAC;EAC7D,IAAAf,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,gBAAgB,EAAEX,QAAA,CAAAe,YAAY,CAAC;EACzD,IAAAf,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,gBAAgB,EAAEX,QAAA,CAAAe,YAAY,CAAC;EACzD,IAAAf,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,iBAAiB,EAAEX,QAAA,CAAAe,YAAY,CAAC;EAC1D,IAAAf,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,gBAAgB,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACrD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,cAAc,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACnD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,kBAAkB,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACvD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,mBAAmB,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACxD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,yBAAyB,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EAC9D,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,cAAc,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACnD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,iBAAiB,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EACtD,IAAAnB,QAAA,CAAAgB,qBAAqB,EAACL,EAAE,EAAE,aAAa,EAAEX,QAAA,CAAAmB,QAAQ,CAAC;EAElD,IAAI,CAAC,IAAAnB,QAAA,CAAAoB,eAAe,EAACT,EAAE,CAACU,YAAY,CAAC,EAAE;IACrC,MAAM,IAAIvB,QAAA,CAAAwB,eAAe,CACvB,gEAAgE,CACjE;;EAGH,IAAIX,EAAE,CAACY,IAAI,IAAI,IAAI,IAAI,CAAC,IAAAvB,QAAA,CAAAwB,mBAAmB,EAACb,EAAE,CAACY,IAAI,EAAEtB,eAAe,CAAC,EAAE;IACrE,MAAM,IAAIH,QAAA,CAAAwB,eAAe,CACvB,4DAA4DrB,eAAe,aAAa,CACzF;;EAGH,IACEU,EAAE,CAACc,cAAc,IAAI,IAAI,KACxBd,EAAE,CAACc,cAAc,GAAG,CAAC,IAAId,EAAE,CAACc,cAAc,GAAGvB,yBAAyB,CAAC,EACxE;IACA,MAAM,IAAIJ,QAAA,CAAAwB,eAAe,CACvB,iDAAiDpB,yBAAyB,YAAY,CACvF;;EAGH,IACES,EAAE,CAACe,YAAY,IAAI,IAAI,KACtBf,EAAE,CAACe,YAAY,GAAG,CAAC,IAAIf,EAAE,CAACe,YAAY,GAAGvB,iBAAiB,CAAC,EAC5D;IACA,MAAM,IAAIL,QAAA,CAAAwB,eAAe,CACvB,+CAA+CnB,iBAAiB,YAAY,CAC7E;;EAGH,IACEQ,EAAE,CAACgB,gBAAgB,IAAI,IAAI,KAC1BhB,EAAE,CAACgB,gBAAgB,GAAG,CAAC,IAAIhB,EAAE,CAACgB,gBAAgB,GAAGvB,sBAAsB,CAAC,EACzE;IACA,MAAM,IAAIN,QAAA,CAAAwB,eAAe,CACvB,mDAAmDlB,sBAAsB,YAAY,CACtF;;EAGH,IACEO,EAAE,CAACiB,iBAAiB,IAAI,IAAI,KAC3BjB,EAAE,CAACiB,iBAAiB,GAAG,CAAC,IAAIjB,EAAE,CAACiB,iBAAiB,GAAGvB,uBAAuB,CAAC,EAC5E;IACA,MAAM,IAAIP,QAAA,CAAAwB,eAAe,CACvB,oDAAoDjB,uBAAuB,YAAY,CACxF;;EAGH,IACEM,EAAE,CAACkB,uBAAuB,IAAI,IAAI,KACjClB,EAAE,CAACkB,uBAAuB,GAAG,CAAC,IAC7BlB,EAAE,CAACkB,uBAAuB,GAAGvB,8BAA8B,CAAC,EAC9D;IACA,MAAM,IAAIR,QAAA,CAAAwB,eAAe,CACvB,0DAA0DhB,8BAA8B,YAAY,CACrG;;EAGH,IAAIK,EAAE,CAACmB,eAAe,IAAI,IAAI,IAAInB,EAAE,CAACmB,eAAe,GAAGvB,oBAAoB,EAAE;IAC3E,MAAM,IAAIT,QAAA,CAAAwB,eAAe,CACvB,6DAA6Df,oBAAoB,EAAE,CACpF;;EAGH,IACEI,EAAE,CAACmB,eAAe,IAAI,IAAI,IAC1BnB,EAAE,CAACoB,WAAW,IAAI,IAAI,IACtBpB,EAAE,CAACoB,WAAW,GAAGpB,EAAE,CAACmB,eAAe,EACnC;IACA,MAAM,IAAIhC,QAAA,CAAAwB,eAAe,CACvB,+DAA+D,CAChE;;AAEL;AA9FAb,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}